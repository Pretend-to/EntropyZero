<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŒ‡ä»¤é¢æ¿ - macOS Spotlight é£æ ¼</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            overflow: hidden;
        }

        /* æ¯›ç»ç’ƒèƒŒæ™¯é®ç½© */
        .glass-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease-out;
            z-index: 1000;
        }

        .glass-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* æŒ‡ä»¤é¢æ¿å®¹å™¨ */
        .command-palette {
            position: fixed;
            top: 30%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 600px;
            max-width: calc(100vw - 40px);
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transition: all 0.2s ease-out;
            z-index: 1001;
        }

        .command-palette.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .command-palette.expanded {
            height: 400px;
        }

        /* æœç´¢è¾“å…¥æ¡† */
        .search-input {
            width: 100%;
            padding: 20px 24px;
            background: transparent;
            border: none;
            outline: none;
            font-size: 18px;
            color: white;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        /* åœºæ™¯æŒ‡ç¤ºå™¨ */
        .scene-indicator {
            position: absolute;
            top: 20px;
            right: 24px;
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .scene-indicator.visible {
            opacity: 1;
        }

        /* å¯å±•å¼€å†…å®¹åŒºåŸŸ */
        .expandable-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .command-palette.expanded .expandable-content {
            max-height: 340px;
        }

        /* é»˜è®¤å»ºè®®åˆ—è¡¨ */
        .suggestions-list {
            padding: 16px 0;
        }

        .suggestion-item {
            display: flex;
            align-items: center;
            padding: 12px 24px;
            cursor: pointer;
            transition: background-color 0.15s ease;
            border-left: 3px solid transparent;
        }

        .suggestion-item:hover,
        .suggestion-item.selected {
            background: rgba(255, 255, 255, 0.1);
            border-left-color: rgba(255, 255, 255, 0.6);
        }

        .suggestion-icon {
            width: 20px;
            height: 20px;
            margin-right: 12px;
            opacity: 0.8;
        }

        .suggestion-content {
            flex: 1;
        }

        .suggestion-title {
            color: white;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .suggestion-description {
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
        }

        .suggestion-shortcut {
            color: rgba(255, 255, 255, 0.5);
            font-size: 11px;
            font-family: 'SF Mono', Monaco, monospace;
        }

        /* AI èŠå¤©åœºæ™¯ */
        .ai-scene {
            display: none;
            padding: 16px 24px;
            height: 340px;
        }

        .ai-scene.active {
            display: block;
        }

        .chat-messages {
            height: 240px;
            overflow-y: auto;
            margin-bottom: 16px;
            padding-right: 8px;
        }

        .chat-message {
            margin-bottom: 12px;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 14px;
            line-height: 1.4;
        }

        .chat-message.user {
            background: rgba(0, 123, 255, 0.3);
            color: white;
            margin-left: 40px;
        }

        .chat-message.assistant {
            background: rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.9);
            margin-right: 40px;
        }

        .chat-input {
            width: 100%;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: white;
            font-size: 14px;
            outline: none;
        }

        /* æœç´¢åœºæ™¯ */
        .search-scene {
            display: none;
            padding: 16px 0;
        }

        .search-scene.active {
            display: block;
        }

        .search-results {
            max-height: 300px;
            overflow-y: auto;
        }

        .search-result {
            padding: 12px 24px;
            cursor: pointer;
            transition: background-color 0.15s ease;
        }

        .search-result:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .result-title {
            color: white;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .result-path {
            color: rgba(255, 255, 255, 0.6);
            font-size: 12px;
            margin-bottom: 2px;
        }

        .result-preview {
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
            line-height: 1.3;
        }

        .highlight {
            background: rgba(255, 255, 0, 0.3);
            color: white;
            padding: 1px 2px;
            border-radius: 2px;
        }

        /* æ¨¡æ¿åœºæ™¯ */
        .template-scene {
            display: none;
            padding: 16px 24px;
        }

        .template-scene.active {
            display: block;
        }

        .template-categories {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            overflow-x: auto;
            padding-bottom: 8px;
        }

        .category-tag {
            padding: 6px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            color: rgba(255, 255, 255, 0.8);
            font-size: 12px;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.15s ease;
        }

        .category-tag.active,
        .category-tag:hover {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
            max-height: 240px;
            overflow-y: auto;
        }

        .template-card {
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .template-card:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .template-title {
            color: white;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .template-description {
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
            line-height: 1.3;
            margin-bottom: 8px;
        }

        .template-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
        }

        /* å·¥ä½œæµåœºæ™¯ */
        .workflow-scene {
            display: none;
            padding: 16px 24px;
        }

        .workflow-scene.active {
            display: block;
        }

        .workflow-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .workflow-item {
            display: flex;
            align-items: center;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .workflow-item:hover {
            background: rgba(255, 255, 255, 0.1);
            border-color: rgba(255, 255, 255, 0.3);
        }

        .workflow-icon {
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 16px;
        }

        .workflow-content {
            flex: 1;
        }

        .workflow-title {
            color: white;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .workflow-description {
            color: rgba(255, 255, 255, 0.7);
            font-size: 12px;
        }

        .workflow-status {
            padding: 4px 8px;
            background: rgba(0, 255, 0, 0.2);
            color: rgba(0, 255, 0, 0.8);
            border-radius: 4px;
            font-size: 11px;
        }

        /* è®¾ç½®åœºæ™¯ */
        .settings-scene {
            display: none;
            padding: 16px 24px;
        }

        .settings-scene.active {
            display: block;
        }

        .settings-group {
            margin-bottom: 20px;
        }

        .settings-group-title {
            color: white;
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 8px;
            padding-left: 4px;
        }

        .setting-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            margin-bottom: 4px;
            cursor: pointer;
            transition: background-color 0.15s ease;
        }

        .setting-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .setting-label {
            color: rgba(255, 255, 255, 0.9);
            font-size: 13px;
        }

        .setting-toggle {
            width: 36px;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            position: relative;
            transition: background-color 0.15s ease;
        }

        .setting-toggle.active {
            background: rgba(0, 122, 255, 0.8);
        }

        .setting-toggle::after {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 16px;
            height: 16px;
            background: white;
            border-radius: 50%;
            transition: transform 0.15s ease;
        }

        .setting-toggle.active::after {
            transform: translateX(16px);
        }

        /* å¸®åŠ©åœºæ™¯ */
        .help-scene {
            display: none;
            padding: 16px 24px;
        }

        .help-scene.active {
            display: block;
        }

        .help-content {
            max-height: 300px;
            overflow-y: auto;
        }

        .help-section {
            margin-bottom: 16px;
        }

        .help-title {
            color: white;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 8px;
        }

        .help-shortcuts {
            display: grid;
            gap: 6px;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 6px 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }

        .shortcut-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 12px;
        }

        .shortcut-keys {
            color: rgba(255, 255, 255, 0.6);
            font-size: 11px;
            font-family: 'SF Mono', Monaco, monospace;
        }

        /* å¿«æ·é”®æç¤º */
        .keyboard-hints {
            position: absolute;
            bottom: 16px;
            left: 24px;
            right: 24px;
            display: flex;
            justify-content: space-between;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.5);
        }

        .hint-group {
            display: flex;
            gap: 16px;
        }

        .hint {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .key {
            padding: 2px 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            font-family: 'SF Mono', Monaco, monospace;
        }

        /* æ»šåŠ¨æ¡æ ·å¼ */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }
    </style>
</head>
<body>
    <!-- æ¯›ç»ç’ƒèƒŒæ™¯é®ç½© -->
    <div class="glass-overlay" id="glassOverlay"></div>

    <!-- æŒ‡ä»¤é¢æ¿ -->
    <div class="command-palette" id="commandPalette">
        <!-- æœç´¢è¾“å…¥æ¡† -->
        <input 
            type="text" 
            class="search-input" 
            id="searchInput"
            placeholder="è¾“å…¥æŒ‡ä»¤æˆ–æœç´¢å†…å®¹..."
            autocomplete="off"
            spellcheck="false"
        >

        <!-- åœºæ™¯æŒ‡ç¤ºå™¨ -->
        <div class="scene-indicator" id="sceneIndicator">é»˜è®¤</div>

        <!-- å¯å±•å¼€å†…å®¹åŒºåŸŸ -->
        <div class="expandable-content" id="expandableContent">
            <!-- é»˜è®¤å»ºè®®åˆ—è¡¨ -->
            <div class="suggestions-list" id="defaultScene">
                <div class="suggestion-item selected">
                    <div class="suggestion-icon">ğŸ¤–</div>
                    <div class="suggestion-content">
                        <div class="suggestion-title">AI åŠ©æ‰‹</div>
                        <div class="suggestion-description">ä¸ AI å¯¹è¯ï¼Œè·å–æ™ºèƒ½å»ºè®®</div>
                    </div>
                    <div class="suggestion-shortcut">/ai</div>
                </div>
                <div class="suggestion-item">
                    <div class="suggestion-icon">ğŸ”</div>
                    <div class="suggestion-content">
                        <div class="suggestion-title">å…¨å±€æœç´¢</div>
                        <div class="suggestion-description">æœç´¢ä»»åŠ¡ã€æ–‡ä»¶å’Œå†…å®¹</div>
                    </div>
                    <div class="suggestion-shortcut">/search</div>
                </div>
                <div class="suggestion-item">
                    <div class="suggestion-icon">ğŸ“‹</div>
                    <div class="suggestion-content">
                        <div class="suggestion-title">æ¨¡æ¿åº“</div>
                        <div class="suggestion-description">ä½¿ç”¨é¢„è®¾æ¨¡æ¿å¿«é€Ÿåˆ›å»ºä»»åŠ¡</div>
                    </div>
                    <div class="suggestion-shortcut">/template</div>
                </div>
                <div class="suggestion-item">
                    <div class="suggestion-icon">âš¡</div>
                    <div class="suggestion-content">
                        <div class="suggestion-title">å·¥ä½œæµ</div>
                        <div class="suggestion-description">æ‰§è¡Œè‡ªåŠ¨åŒ–å·¥ä½œæµç¨‹</div>
                    </div>
                    <div class="suggestion-shortcut">/workflow</div>
                </div>
                <div class="suggestion-item">
                    <div class="suggestion-icon">âš™ï¸</div>
                    <div class="suggestion-content">
                        <div class="suggestion-title">è®¾ç½®</div>
                        <div class="suggestion-description">é…ç½®åº”ç”¨åå¥½å’Œé€‰é¡¹</div>
                    </div>
                    <div class="suggestion-shortcut">/settings</div>
                </div>
                <div class="suggestion-item">
                    <div class="suggestion-icon">â“</div>
                    <div class="suggestion-content">
                        <div class="suggestion-title">å¸®åŠ©</div>
                        <div class="suggestion-description">æŸ¥çœ‹å¿«æ·é”®å’Œä½¿ç”¨æŒ‡å—</div>
                    </div>
                    <div class="suggestion-shortcut">/help</div>
                </div>
                <div class="suggestion-item">
                    <div class="suggestion-icon">â•</div>
                    <div class="suggestion-content">
                        <div class="suggestion-title">åˆ›å»ºæ–°ä»»åŠ¡</div>
                        <div class="suggestion-description">å¿«é€Ÿæ·»åŠ æ–°çš„ä»»åŠ¡èŠ‚ç‚¹</div>
                    </div>
                    <div class="suggestion-shortcut">âŒ˜N</div>
                </div>
            </div>

            <!-- AI èŠå¤©åœºæ™¯ -->
            <div class="ai-scene" id="aiScene">
                <div class="chat-messages" id="chatMessages">
                    <div class="chat-message assistant">
                        ä½ å¥½ï¼æˆ‘æ˜¯ AI åŠ©æ‰‹ï¼Œå¯ä»¥å¸®ä½ åˆ›å»ºä»»åŠ¡ã€åˆ†æé¡¹ç›®æˆ–å›ç­”é—®é¢˜ã€‚æœ‰ä»€ä¹ˆæˆ‘å¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ
                    </div>
                </div>
                <input 
                    type="text" 
                    class="chat-input" 
                    id="chatInput"
                    placeholder="è¾“å…¥ä½ çš„é—®é¢˜æˆ–éœ€æ±‚..."
                >
            </div>

            <!-- æœç´¢åœºæ™¯ -->
            <div class="search-scene" id="searchScene">
                <div class="search-results" id="searchResults">
                    <div class="search-result">
                        <div class="result-title">é¡¹ç›®è§„åˆ’ä»»åŠ¡</div>
                        <div class="result-path">ç”»å¸ƒ > é¡¹ç›®ç®¡ç†</div>
                        <div class="result-preview">åˆ¶å®šè¯¦ç»†çš„<span class="highlight">é¡¹ç›®</span>è®¡åˆ’ï¼ŒåŒ…æ‹¬æ—¶é—´çº¿å’Œé‡Œç¨‹ç¢‘...</div>
                    </div>
                    <div class="search-result">
                        <div class="result-title">UI è®¾è®¡è¯„å®¡</div>
                        <div class="result-path">ç”»å¸ƒ > è®¾è®¡</div>
                        <div class="result-preview">å¯¹æ–°çš„ç”¨æˆ·ç•Œé¢<span class="highlight">è®¾è®¡</span>è¿›è¡Œå…¨é¢è¯„å®¡...</div>
                    </div>
                    <div class="search-result">
                        <div class="result-title">ä»£ç é‡æ„</div>
                        <div class="result-path">ç”»å¸ƒ > å¼€å‘</div>
                        <div class="result-preview">é‡æ„æ ¸å¿ƒæ¨¡å—çš„<span class="highlight">ä»£ç </span>ç»“æ„ï¼Œæé«˜å¯ç»´æŠ¤æ€§...</div>
                    </div>
                </div>
            </div>

            <!-- æ¨¡æ¿åœºæ™¯ -->
            <div class="template-scene" id="templateScene">
                <div class="template-categories">
                    <div class="category-tag active">å…¨éƒ¨</div>
                    <div class="category-tag">é¡¹ç›®ç®¡ç†</div>
                    <div class="category-tag">è½¯ä»¶å¼€å‘</div>
                    <div class="category-tag">è®¾è®¡</div>
                    <div class="category-tag">è¥é”€</div>
                </div>
                <div class="template-grid">
                    <div class="template-card">
                        <div class="template-title">æ•æ·å¼€å‘å†²åˆº</div>
                        <div class="template-description">åŒ…å«ç”¨æˆ·æ•…äº‹ã€ä»»åŠ¡åˆ†è§£ã€æ¯æ—¥ç«™ä¼šç­‰å®Œæ•´çš„æ•æ·å¼€å‘æµç¨‹</div>
                        <div class="template-meta">
                            <span>12 ä¸ªä»»åŠ¡</span>
                            <span>2-3 å‘¨</span>
                        </div>
                    </div>
                    <div class="template-card">
                        <div class="template-title">äº§å“å‘å¸ƒè®¡åˆ’</div>
                        <div class="template-description">ä»éœ€æ±‚åˆ†æåˆ°äº§å“ä¸Šçº¿çš„å®Œæ•´å‘å¸ƒæµç¨‹ï¼ŒåŒ…å«æµ‹è¯•å’Œéƒ¨ç½²</div>
                        <div class="template-meta">
                            <span>18 ä¸ªä»»åŠ¡</span>
                            <span>4-6 å‘¨</span>
                        </div>
                    </div>
                    <div class="template-card">
                        <div class="template-title">UI/UX è®¾è®¡æµç¨‹</div>
                        <div class="template-description">ç”¨æˆ·ç ”ç©¶ã€åŸå‹è®¾è®¡ã€è§†è§‰è®¾è®¡ã€å¯ç”¨æ€§æµ‹è¯•çš„å®Œæ•´è®¾è®¡æµç¨‹</div>
                        <div class="template-meta">
                            <span>15 ä¸ªä»»åŠ¡</span>
                            <span>3-4 å‘¨</span>
                        </div>
                    </div>
                    <div class="template-card">
                        <div class="template-title">å†…å®¹è¥é”€ç­–ç•¥</div>
                        <div class="template-description">å†…å®¹ç­–åˆ’ã€åˆ›ä½œã€å‘å¸ƒã€æ¨å¹¿çš„å®Œæ•´è¥é”€æµç¨‹</div>
                        <div class="template-meta">
                            <span>10 ä¸ªä»»åŠ¡</span>
                            <span>æŒç»­è¿›è¡Œ</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å·¥ä½œæµåœºæ™¯ -->
            <div class="workflow-scene" id="workflowScene">
                <div class="workflow-list">
                    <div class="workflow-item">
                        <div class="workflow-icon">ğŸ”„</div>
                        <div class="workflow-content">
                            <div class="workflow-title">è‡ªåŠ¨åŒ–éƒ¨ç½²</div>
                            <div class="workflow-description">ä»£ç æäº¤ â†’ æ„å»º â†’ æµ‹è¯• â†’ éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ</div>
                        </div>
                        <div class="workflow-status">å°±ç»ª</div>
                    </div>
                    <div class="workflow-item">
                        <div class="workflow-icon">ğŸ“Š</div>
                        <div class="workflow-content">
                            <div class="workflow-title">æ¯å‘¨æŠ¥å‘Šç”Ÿæˆ</div>
                            <div class="workflow-description">æ”¶é›†æ•°æ® â†’ ç”Ÿæˆå›¾è¡¨ â†’ å‘é€é‚®ä»¶æŠ¥å‘Š</div>
                        </div>
                        <div class="workflow-status">å°±ç»ª</div>
                    </div>
                    <div class="workflow-item">
                        <div class="workflow-icon">ğŸ§¹</div>
                        <div class="workflow-content">
                            <div class="workflow-title">ä»»åŠ¡æ¸…ç†</div>
                            <div class="workflow-description">æ ‡è®°å®Œæˆçš„ä»»åŠ¡ â†’ å½’æ¡£ â†’ æ¸…ç†è¿‡æœŸæ•°æ®</div>
                        </div>
                        <div class="workflow-status">å°±ç»ª</div>
                    </div>
                    <div class="workflow-item">
                        <div class="workflow-icon">ğŸ””</div>
                        <div class="workflow-content">
                            <div class="workflow-title">æˆªæ­¢æ—¥æœŸæé†’</div>
                            <div class="workflow-description">æ£€æŸ¥å³å°†åˆ°æœŸçš„ä»»åŠ¡ â†’ å‘é€æé†’é€šçŸ¥</div>
                        </div>
                        <div class="workflow-status">å°±ç»ª</div>
                    </div>
                    <div class="workflow-item">
                        <div class="workflow-icon">ğŸ“ˆ</div>
                        <div class="workflow-content">
                            <div class="workflow-title">è¿›åº¦åŒæ­¥</div>
                            <div class="workflow-description">æ›´æ–°é¡¹ç›®è¿›åº¦ â†’ åŒæ­¥åˆ°å›¢é˜Ÿçœ‹æ¿ â†’ é€šçŸ¥ç›¸å…³äººå‘˜</div>
                        </div>
                        <div class="workflow-status">å°±ç»ª</div>
                    </div>
                </div>
            </div>

            <!-- è®¾ç½®åœºæ™¯ -->
            <div class="settings-scene" id="settingsScene">
                <div class="settings-group">
                    <div class="settings-group-title">ç•Œé¢è®¾ç½®</div>
                    <div class="setting-item">
                        <div class="setting-label">æš—è‰²ä¸»é¢˜</div>
                        <div class="setting-toggle active"></div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">æ¯›ç»ç’ƒæ•ˆæœ</div>
                        <div class="setting-toggle active"></div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">åŠ¨ç”»æ•ˆæœ</div>
                        <div class="setting-toggle active"></div>
                    </div>
                </div>
                <div class="settings-group">
                    <div class="settings-group-title">AI åŠ©æ‰‹</div>
                    <div class="setting-item">
                        <div class="setting-label">æ™ºèƒ½å»ºè®®</div>
                        <div class="setting-toggle active"></div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">ä¸Šä¸‹æ–‡æ„ŸçŸ¥</div>
                        <div class="setting-toggle active"></div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">è‡ªåŠ¨å®Œæˆ</div>
                        <div class="setting-toggle"></div>
                    </div>
                </div>
                <div class="settings-group">
                    <div class="settings-group-title">å¿«æ·é”®</div>
                    <div class="setting-item">
                        <div class="setting-label">å…¨å±€å¿«æ·é”®</div>
                        <div class="setting-toggle active"></div>
                    </div>
                    <div class="setting-item">
                        <div class="setting-label">Vim æ¨¡å¼</div>
                        <div class="setting-toggle"></div>
                    </div>
                </div>
            </div>

            <!-- å¸®åŠ©åœºæ™¯ -->
            <div class="help-scene" id="helpScene">
                <div class="help-content">
                    <div class="help-section">
                        <div class="help-title">å¿«æ·é”®</div>
                        <div class="help-shortcuts">
                            <div class="shortcut-item">
                                <div class="shortcut-description">æ‰“å¼€æŒ‡ä»¤é¢æ¿</div>
                                <div class="shortcut-keys">âŒ˜ K</div>
                            </div>
                            <div class="shortcut-item">
                                <div class="shortcut-description">å…³é—­é¢æ¿</div>
                                <div class="shortcut-keys">Esc</div>
                            </div>
                            <div class="shortcut-item">
                                <div class="shortcut-description">ä¸Šä¸‹å¯¼èˆª</div>
                                <div class="shortcut-keys">â†‘ â†“</div>
                            </div>
                            <div class="shortcut-item">
                                <div class="shortcut-description">é€‰æ‹©é¡¹ç›®</div>
                                <div class="shortcut-keys">Enter</div>
                            </div>
                            <div class="shortcut-item">
                                <div class="shortcut-description">åˆ›å»ºæ–°ä»»åŠ¡</div>
                                <div class="shortcut-keys">âŒ˜ N</div>
                            </div>
                        </div>
                    </div>
                    <div class="help-section">
                        <div class="help-title">åœºæ™¯åˆ‡æ¢</div>
                        <div class="help-shortcuts">
                            <div class="shortcut-item">
                                <div class="shortcut-description">AI åŠ©æ‰‹</div>
                                <div class="shortcut-keys">/ai</div>
                            </div>
                            <div class="shortcut-item">
                                <div class="shortcut-description">å…¨å±€æœç´¢</div>
                                <div class="shortcut-keys">/search</div>
                            </div>
                            <div class="shortcut-item">
                                <div class="shortcut-description">æ¨¡æ¿åº“</div>
                                <div class="shortcut-keys">/template</div>
                            </div>
                            <div class="shortcut-item">
                                <div class="shortcut-description">å·¥ä½œæµ</div>
                                <div class="shortcut-keys">/workflow</div>
                            </div>
                            <div class="shortcut-item">
                                <div class="shortcut-description">è®¾ç½®</div>
                                <div class="shortcut-keys">/settings</div>
                            </div>
                            <div class="shortcut-item">
                                <div class="shortcut-description">å¸®åŠ©</div>
                                <div class="shortcut-keys">/help</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- å¿«æ·é”®æç¤º -->
        <div class="keyboard-hints">
            <div class="hint-group">
                <div class="hint">
                    <span class="key">â†‘â†“</span>
                    <span>å¯¼èˆª</span>
                </div>
                <div class="hint">
                    <span class="key">â†µ</span>
                    <span>é€‰æ‹©</span>
                </div>
                <div class="hint">
                    <span class="key">âŒ˜K</span>
                    <span>å”¤èµ·</span>
                </div>
            </div>
            <div class="hint-group">
                <div class="hint">
                    <span class="key">Esc</span>
                    <span>å…³é—­</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        class CommandPalette {
            constructor() {
                this.isOpen = false;
                this.currentScene = 'default';
                this.selectedIndex = 0;
                this.suggestions = [];
                
                this.initElements();
                this.bindEvents();
                this.loadSuggestions();
            }

            initElements() {
                this.overlay = document.getElementById('glassOverlay');
                this.palette = document.getElementById('commandPalette');
                this.searchInput = document.getElementById('searchInput');
                this.sceneIndicator = document.getElementById('sceneIndicator');
                this.expandableContent = document.getElementById('expandableContent');
                
                // åœºæ™¯å…ƒç´ 
                this.defaultScene = document.getElementById('defaultScene');
                this.aiScene = document.getElementById('aiScene');
                this.searchScene = document.getElementById('searchScene');
                this.templateScene = document.getElementById('templateScene');
                this.workflowScene = document.getElementById('workflowScene');
                this.settingsScene = document.getElementById('settingsScene');
                this.helpScene = document.getElementById('helpScene');
                
                this.chatInput = document.getElementById('chatInput');
            }

            bindEvents() {
                // å…¨å±€å¿«æ·é”®
                document.addEventListener('keydown', (e) => {
                    if (e.metaKey && e.key === 'k') {
                        e.preventDefault();
                        this.toggle();
                    } else if (e.key === 'Escape' && this.isOpen) {
                        this.close();
                    }
                });

                // èƒŒæ™¯ç‚¹å‡»å…³é—­
                this.overlay.addEventListener('click', () => this.close());

                // æœç´¢è¾“å…¥å¤„ç†
                this.searchInput.addEventListener('input', (e) => {
                    this.handleInput(e.target.value);
                });

                this.searchInput.addEventListener('keydown', (e) => {
                    this.handleKeyNavigation(e);
                });

                // AI èŠå¤©è¾“å…¥
                this.chatInput.addEventListener('keydown', (e) => {
                    if (e.key === 'Enter') {
                        this.sendChatMessage(e.target.value);
                        e.target.value = '';
                    }
                });

                // æ¨¡æ¿åˆ†ç±»ç‚¹å‡»äº‹ä»¶
                document.querySelectorAll('.category-tag').forEach(tag => {
                    tag.addEventListener('click', (e) => {
                        document.querySelectorAll('.category-tag').forEach(t => t.classList.remove('active'));
                        e.target.classList.add('active');
                        this.filterTemplates(e.target.textContent);
                    });
                });

                // è®¾ç½®åˆ‡æ¢äº‹ä»¶
                document.querySelectorAll('.setting-toggle').forEach(toggle => {
                    toggle.addEventListener('click', (e) => {
                        e.target.classList.toggle('active');
                    });
                });

                // æ¨¡æ¿å¡ç‰‡ç‚¹å‡»äº‹ä»¶
                document.querySelectorAll('.template-card').forEach(card => {
                    card.addEventListener('click', (e) => {
                        this.applyTemplate(card.querySelector('.template-title').textContent);
                    });
                });

                // å·¥ä½œæµé¡¹ç‚¹å‡»äº‹ä»¶
                document.querySelectorAll('.workflow-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        this.executeWorkflow(item.querySelector('.workflow-title').textContent);
                    });
                });
            }

            toggle() {
                if (this.isOpen) {
                    this.close();
                } else {
                    this.open();
                }
            }

            open() {
                this.isOpen = true;
                this.overlay.classList.add('active');
                this.palette.classList.add('active');
                
                setTimeout(() => {
                    this.searchInput.focus();
                }, 100);
            }

            close() {
                this.isOpen = false;
                this.overlay.classList.remove('active');
                this.palette.classList.remove('active', 'expanded');
                this.searchInput.value = '';
                this.currentScene = 'default';
                this.updateSceneIndicator();
                this.hideAllScenes();
            }

            handleInput(value) {
                const trimmedValue = value.trim();
                
                // æ£€æµ‹åœºæ™¯å‰ç¼€
                if (trimmedValue.startsWith('/')) {
                    this.detectAndSwitchScene(trimmedValue);
                } else if (trimmedValue === '') {
                    this.switchToScene('default');
                } else {
                    // æ™®é€šæœç´¢
                    this.switchToScene('search');
                    this.performSearch(trimmedValue);
                }
            }

            detectAndSwitchScene(input) {
                const scenes = {
                    '/ai': 'ai',
                    '/search': 'search',
                    '/template': 'template',
                    '/workflow': 'workflow',
                    '/settings': 'settings',
                    '/help': 'help'
                };

                for (const [prefix, scene] of Object.entries(scenes)) {
                    if (input.startsWith(prefix)) {
                        this.switchToScene(scene);
                        return;
                    }
                }
            }

            switchToScene(scene) {
                if (this.currentScene === scene) return;

                this.currentScene = scene;
                this.updateSceneIndicator();
                this.hideAllScenes();

                if (scene === 'default') {
                    this.palette.classList.remove('expanded');
                    this.defaultScene.style.display = 'block';
                } else {
                    this.palette.classList.add('expanded');
                    
                    switch (scene) {
                        case 'ai':
                            this.aiScene.classList.add('active');
                            setTimeout(() => this.chatInput.focus(), 100);
                            break;
                        case 'search':
                            this.searchScene.classList.add('active');
                            break;
                        case 'template':
                            this.templateScene.classList.add('active');
                            break;
                        case 'workflow':
                            this.workflowScene.classList.add('active');
                            break;
                        case 'settings':
                            this.settingsScene.classList.add('active');
                            break;
                        case 'help':
                            this.helpScene.classList.add('active');
                            break;
                    }
                }
            }

            hideAllScenes() {
                this.defaultScene.style.display = 'none';
                this.aiScene.classList.remove('active');
                this.searchScene.classList.remove('active');
                this.templateScene.classList.remove('active');
                this.workflowScene.classList.remove('active');
                this.settingsScene.classList.remove('active');
                this.helpScene.classList.remove('active');
            }

            updateSceneIndicator() {
                const sceneNames = {
                    'default': 'é»˜è®¤',
                    'ai': 'AI åŠ©æ‰‹',
                    'search': 'æœç´¢',
                    'template': 'æ¨¡æ¿',
                    'workflow': 'å·¥ä½œæµ',
                    'settings': 'è®¾ç½®',
                    'help': 'å¸®åŠ©'
                };

                this.sceneIndicator.textContent = sceneNames[this.currentScene] || 'é»˜è®¤';
                
                if (this.currentScene !== 'default') {
                    this.sceneIndicator.classList.add('visible');
                } else {
                    this.sceneIndicator.classList.remove('visible');
                }
            }

            handleKeyNavigation(e) {
                if (this.currentScene !== 'default') return;

                const items = this.defaultScene.querySelectorAll('.suggestion-item');
                
                switch (e.key) {
                    case 'ArrowDown':
                        e.preventDefault();
                        this.selectedIndex = Math.min(this.selectedIndex + 1, items.length - 1);
                        this.updateSelection(items);
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        this.selectedIndex = Math.max(this.selectedIndex - 1, 0);
                        this.updateSelection(items);
                        break;
                    case 'Enter':
                        e.preventDefault();
                        this.executeSelectedItem(items[this.selectedIndex]);
                        break;
                }
            }

            updateSelection(items) {
                items.forEach((item, index) => {
                    item.classList.toggle('selected', index === this.selectedIndex);
                });
            }

            executeSelectedItem(item) {
                const shortcut = item.querySelector('.suggestion-shortcut').textContent;
                
                if (shortcut.startsWith('/')) {
                    this.searchInput.value = shortcut + ' ';
                    this.handleInput(this.searchInput.value);
                } else {
                    // æ‰§è¡Œå…¶ä»–æ“ä½œ
                    console.log('æ‰§è¡Œæ“ä½œ:', item.querySelector('.suggestion-title').textContent);
                    this.close();
                }
            }

            performSearch(query) {
                // æ¨¡æ‹Ÿæœç´¢ç»“æœ
                const results = [
                    {
                        title: `åŒ…å« "${query}" çš„ä»»åŠ¡ 1`,
                        path: 'ç”»å¸ƒ > é¡¹ç›®ç®¡ç†',
                        preview: `è¿™æ˜¯ä¸€ä¸ªåŒ…å« ${query} å…³é”®è¯çš„ä»»åŠ¡æè¿°...`
                    },
                    {
                        title: `ç›¸å…³ä»»åŠ¡ 2`,
                        path: 'ç”»å¸ƒ > å¼€å‘',
                        preview: `å¦ä¸€ä¸ªä¸ ${query} ç›¸å…³çš„ä»»åŠ¡å†…å®¹...`
                    }
                ];

                this.renderSearchResults(results, query);
            }

            renderSearchResults(results, query) {
                const container = document.getElementById('searchResults');
                container.innerHTML = '';

                results.forEach(result => {
                    const item = document.createElement('div');
                    item.className = 'search-result';
                    
                    const highlightedPreview = result.preview.replace(
                        new RegExp(query, 'gi'),
                        `<span class="highlight">$&</span>`
                    );

                    item.innerHTML = `
                        <div class="result-title">${result.title}</div>
                        <div class="result-path">${result.path}</div>
                        <div class="result-preview">${highlightedPreview}</div>
                    `;

                    container.appendChild(item);
                });
            }

            sendChatMessage(message) {
                if (!message.trim()) return;

                const messagesContainer = document.getElementById('chatMessages');
                
                // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
                const userMessage = document.createElement('div');
                userMessage.className = 'chat-message user';
                userMessage.textContent = message;
                messagesContainer.appendChild(userMessage);

                // æ¨¡æ‹Ÿ AI å›å¤
                setTimeout(() => {
                    const aiMessage = document.createElement('div');
                    aiMessage.className = 'chat-message assistant';
                    aiMessage.textContent = `æˆ‘ç†è§£ä½ æƒ³è¦ "${message}"ã€‚è®©æˆ‘å¸®ä½ åˆ›å»ºç›¸å…³çš„ä»»åŠ¡æˆ–æä¾›å»ºè®®ã€‚`;
                    messagesContainer.appendChild(aiMessage);
                    
                    messagesContainer.scrollTop = messagesContainer.scrollHeight;
                }, 1000);

                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }

            loadSuggestions() {
                // åˆå§‹åŒ–å»ºè®®åˆ—è¡¨
                this.suggestions = [
                    { title: 'AI åŠ©æ‰‹', shortcut: '/ai' },
                    { title: 'å…¨å±€æœç´¢', shortcut: '/search' },
                    { title: 'æ¨¡æ¿åº“', shortcut: '/template' },
                    { title: 'å·¥ä½œæµ', shortcut: '/workflow' },
                    { title: 'è®¾ç½®', shortcut: '/settings' },
                    { title: 'å¸®åŠ©', shortcut: '/help' },
                    { title: 'åˆ›å»ºæ–°ä»»åŠ¡', shortcut: 'âŒ˜N' }
                ];
            }

            // æ¨¡æ¿ç›¸å…³æ–¹æ³•
            filterTemplates(category) {
                console.log('ç­›é€‰æ¨¡æ¿åˆ†ç±»:', category);
                // è¿™é‡Œå¯ä»¥å®ç°æ¨¡æ¿ç­›é€‰é€»è¾‘
            }

            applyTemplate(templateName) {
                console.log('åº”ç”¨æ¨¡æ¿:', templateName);
                alert(`æ­£åœ¨åº”ç”¨æ¨¡æ¿: ${templateName}`);
                this.close();
            }

            // å·¥ä½œæµç›¸å…³æ–¹æ³•
            executeWorkflow(workflowName) {
                console.log('æ‰§è¡Œå·¥ä½œæµ:', workflowName);
                alert(`æ­£åœ¨æ‰§è¡Œå·¥ä½œæµ: ${workflowName}`);
                this.close();
            }
        }

        // åˆå§‹åŒ–æŒ‡ä»¤é¢æ¿
        const commandPalette = new CommandPalette();

        // æ·»åŠ ä¸€äº›æ¼”ç¤ºæç¤º
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                alert('æŒ‰ Cmd+K å”¤èµ·æŒ‡ä»¤é¢æ¿\n\nåŠŸèƒ½æ¼”ç¤ºï¼š\nâ€¢ è¾“å…¥ /ai è¿›å…¥ AI åŠ©æ‰‹æ¨¡å¼\nâ€¢ è¾“å…¥ /search è¿›å…¥æœç´¢æ¨¡å¼\nâ€¢ è¾“å…¥ /template æŸ¥çœ‹æ¨¡æ¿åº“\nâ€¢ è¾“å…¥ /workflow æŸ¥çœ‹å·¥ä½œæµ\nâ€¢ è¾“å…¥ /settings æ‰“å¼€è®¾ç½®\nâ€¢ è¾“å…¥ /help æŸ¥çœ‹å¸®åŠ©\nâ€¢ è¾“å…¥æ™®é€šæ–‡å­—è¿›è¡Œæœç´¢\nâ€¢ ä½¿ç”¨æ–¹å‘é”®å¯¼èˆªï¼ŒEnter é€‰æ‹©\nâ€¢ æŒ‰ Esc æˆ–ç‚¹å‡»èƒŒæ™¯å…³é—­');
            }, 500);
        });
    </script>
</body>
</html>